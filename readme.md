# TaskTrack Service

## Описание

TaskTrack — это HTTP API-сервис для управления задачами, выполнение которых занимает продолжительное время (3–5 минут). Сервис реализует:

- Создание задач
- Получение статуса задачи
- Обновление задачи
- Удаление задачи
- Получение списка всех задач

Задачи обрабатываются асинхронно, без сторонних сервисов (БД, очередей и т.д.) — всё хранится в памяти сервиса.

## Архитектура

### Основные компоненты:

- HTTP API**: реализован на Gin (`/task`, `GET`, `POST`, `PATCH`, `DELETE`)
- Хранилище задач**: in-memory (`map[int]*Task`), с блокировками (`sync.RWMutex`)
- Фоновый процессор задач (`Processor`):
    - Диспетчер, проверяющий очередь задач раз в какое-то время, которое мы задали
    - Пул воркеров, обрабатывающих задачи с задержкой 3–5 минут(здесь приосходит имитация обработки, так как задачи нам неизвестны) 
    - Задача может завершиться успешно или неудачно

### Статусы задачи:

`pending`: задача создана, но ещё не обрабатывается
`running`: задача в процессе выполнения
`done`: задача выполнена успешно
`failed`: задача завершилась с ошибкой

## Запуск

### 1. Переменные окружения
- Все необходимые конфигурации находятся в файле `.env`
- Если файла `.env` нет, то создайте его:

#### Базовая конфигурация файла:

```env
HTTP_HOST=0.0.0.0
HTTP_PORT=8080
APP_MODE=release
LOG_LEVEL=info
```

### 2. Запуск сервиса
- Запуск производится командой  ````go run cmd/app/main.go```` с директории taskTrack
- после запуска API будет доступно http://localhost:8080 

## API
### Все эндпоинты начинаются с api/task/.
- POST /task - создать задачу
Request:
````
{
  "name": "someName",
  "description": "some descriotion"
}
````
Response:
````
{
  "message": "Task created successfully",
  "task_id": 1
}
````
- GET /task - получить все задачи
Response:
````
[
  {
    "id": 1,
    "name": "someName1",
    "description": "123",
    "status": "running"
  },
  {
    "id": 2,
    "name": "someName2",
    "description": "1234",
    "status": "done"
  }
]
````
- GET /task/:id — Получить задачу по ID
Response:
````
{
  "id": 1,
  "name": "someName",
  "description": "some description",
  "status": "done",
  "created_at": "2025-06-19T12:00:00Z",
  "duration": "4m2.348501s"
}
````
- PATCH /task/:id — Обновить задачу
Request:
````
{
  "name": "newName",
  "description": "new some Descrption"
}
````
Response:
````
{
"message": "Task updated successfully",
"task_id": 1
}
````

DELETE /task/:id — Удалить задачу
Response:
````
204 No Content
````

## Расширение
- Проект заложен с возможностью дальнейшего масштабирования и интеграции с внешними сервисами:
  - Перенос in-memory хранилища в Redis или PostgreSQL
  - Настоящий очередь задач (RabbitMQ / Kafka)
  - асширение модели задачи дополнительными параметрами
  - Веб-интерфейс для управления задачами